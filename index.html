<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <title>BBC News Labs - Who's talking about what</title>
    <link rel="stylesheet" href="bower_components/bbcnewslabs-bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css"/>
    <link rel="stylesheet" href="css/application.css"/>
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="bower_components/jquery-flot/jquery.flot.js"></script>
    <script type="text/javascript" src="bower_components/jquery-flot/jquery.flot.time.js"></script>
    <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="js/application.js"></script>
  </head>
  <body>
    <div class="navbar navbar-default navbar-static-top no-margin">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".header-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://bbcnewslabs.co.uk">News Labs</a>
        </div>
        <div class="collapse navbar-collapse header-collapse">
          <p class="navbar-btn"><a href="http://twitter.com/BBC_News_Labs" target="_blank" class="btn btn-primary navbar-link"><i class="fa fa-lg fa-twitter"></i> Follow us on Twitter</a></p>
        </div>
      </div>
    </div>
    <div class="jumbotron page-heading">
      <div class="container">
        <a href="http://bbcnewslabs.co.uk"><img class="labs-logo hidden-xs" alt="News Labs Logo" src="img/news-labs-logo.png" style="border: 0"/></a>
        <h1><strong>Who's talking about what</strong></h1>
        <p class="text-muted">See who's talking about what across hundreds of news sources</p>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h4 class="text-center">
            <i class="fa fa-lg fa-fw fa-info-circle text-info"></i>
            This is an experimental project from News Labs. Coverage may not be accurate for all sources. <a class="about-toggle" href=""><strong>What does this mean?</strong></a>
          </h4>
          <br/>
        </div>
      </div>
      <div id="about" class="row" style="display: none;">
        <div class="col-md-12">
          <div class="well clearfix">
              <a class="about-toggle text-muted pull-right" href=""><i class="fa fa-2x fa-times-circle"></i></a>
              <div class="media">
                <div class="media-left" style="width: 50%">
                  <img src="img/example-graph.png" style="width: 100%;" alt="Example graph" class="pull-left" />
                </div>
                <div class="media-body">
                  <h2>What am I looking at here?</h2>
                  <p class="lead">
                    The Coverage Checker is an tool in development, the analysis is not exhaustive. 
                    At the moment we collect articles that appear in RSS feeds of around 350 news sources, mainly UK,
                    some international.<br>
                    When you search for a keyword (combination) the graph shows you the number of matching articles
                    per day, for each news source.<br>
                    'Topics' are different. They are concepts we assign to the articles, even if the word itself may
                    not appear. The topic <i>BBC</i> for example may appear as <i>BBC</i> or as <i>British Broadcaster</i> or maybe
                    as <i>Radio4</i>.<br> 
                    <b>This process is not perfect</b>, we are still building. Please, keep that in mind when you
                    before wildly interpreting the topic tags under the graph. 
                  </p>
                </div>
              </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div id="juicer-loading" class="row" style="display: none;">
          <div class="col-md-10 col-md-offset-1">
            <p class="lead text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading...</p>
          </div>
        </div>
        <form name="search" action="/" method="post" style="display: none;">
          <div class="col-md-1 hidden-xs hidden-sm">
            <label>Sources</label>
            <button type="button" name="search" class="sources-toggle btn btn-lg btn-default"><i class="fa fa-fw fa-cog"></i><span class="hidden-md hidden-lg">Configure </span><i class="fa fa-caret-down"></i></button>
          </div>
          <div class="col-md-3 col-lg-2">
            <label>Start</label>
            <div class="input-group input-group-lg" data-datepicker="true">
              <input type="text" name="start" class="form-control text-center" auto-complete="off" placeholder="YYYY-MM-DD" value="2015-01-01" style="padding-left: 5px; padding-right: 5px; font-size: 14px"/>
              <div class="input-group-addon">
                <i class="fa fa-calendar"></i>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-lg-2">
            <label>End</label>
            <div class="input-group input-group-lg" data-datepicker="true">
              <input type="text" name="end" class="form-control text-center" auto-complete="off" placeholder="YYYY-MM-DD" style="padding-left: 5px; padding-right: 5px; font-size: 14px"/>
              <div class="input-group-addon">
                <i class="fa fa-calendar"></i>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-lg-7">
            <label>Keywords</label>
            <div class="input-group input-group-lg">
              <input type="search" name="keywords" class="form-control" auto-complete="off" placeholder='e.g. election AND ("David Cameron" OR "Ed Miliband") '/>
              <div class="input-group-btn">
                <button type="submit" name="search" class="btn btn-primary"><i class="fa fa-search"></i> Search</button>
              </div>
            </div>
            <small class="text-muted">You can use AND, OR, NOT and parenthesis in queries.</small>
          </div>
          <div class="col-md-1 visible-xs visible-sm">
            <br/>
            <a class="sources-toggle btn btn-default btn-block btn-sm" href="#"><i class="fa fa-lg fa-fw fa-cogs"></i> Customise sources</a>
          </div>
        </form>
      </div>
      <div id="sources" class="row" style="display: none; margin-top: 10px;">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <p class="lead pull-left" style="margin-bottom: 0;">Customise the sources you wish to include</p>
              <div id="sources-hide" class="btn btn-sm btn-default pull-right"><i class="fa fa-lg text-muted fa-remove"></i></div>
              <div class="btn-group pull-right" style="margin-right: 10px;">
                <div id="sources-select-defaults" class="btn btn-sm btn-default">Default sources</div>
                <div id="sources-select-none" class="btn btn-sm btn-default">Select none</div>
                <div id="sources-select-all" class="btn btn-sm btn-default">Select All</div>
              </div>
            </div>
            <div class="panel-body">
              <div id="juicer-sources"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="examples" class="row" style="display: none;">
        <div class="col-md-7 col-md-offset-5">
          <h3>Example queries</h3>
          <h4><i class="fa fa-lg fa-angle-right"></i> <a href="#">election AND ("David Cameron" OR "Ed Miliband")</a></h4>
          <h4><i class="fa fa-lg fa-angle-right"></i> <a href="#">(immigration OR immigrants OR migrants) AND benefits</a></h4>
          <h4><i class="fa fa-lg fa-angle-right"></i> <a href="#">(Syria OR Iraq) AND (ISIS OR ISIL OR "Islamic State")</a></h4>
          <h4><i class="fa fa-lg fa-angle-right"></i> <a href="#">"climate change"</a></h4>
        </div>
      </div>
      <div id="progress" class="row" style="display: none;">
        <br/>
        <div class="col-md-10 col-md-offset-1">
          <p class="lead"><i class="fa fa-fw fa-refresh fa-spin"></i> <span id="progress-message">Fetching results...</span></p>
          <div class="progress">
            <div class="progress-bar progress-bar-default" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%"><span class="sr-only">20% Complete</span></div>
          </div>
        </div>
      </div>
      <div id="error" class="row" style="display: none;">
        <div class="col-md-12">
          <p class="alert alert-danger" style="margin-top: 15px;">
            <i class="fa fa-lg fa-fw fa-warning"></i>
              An error occured fetching results for one or more sources. You may want to try again. Reducing the number of sources selected might help.
          </p>
        </div>
      </div>
    </div>
    <div style="padding: 20px;">
      <br/>
      <div id="results" class="row"></div>
      <div class="row">
        <div class="col-md-12">
          <p class="lead text-center text-muted" style="margin-top: 20px; margin-bottom: 10px;">
            Inspired by a concept created by Iain Collins, Adam Ramsay &amp; Zoe Blackler
            <br/>at the <a href="http://www.revealnews.org">Center for Investigative Reporting</a> design sprint on Climate Change
            <br/><br/>
            Using data from the BBC News Labs Juicer | <a href="https://github.com/BBC-News-Labs/wat"><i class="fa fa-lg fa-github"></i> View Source </a>
          </p>
        </div>
      </div>
    </div>
    <!-- Stats -->
    <script type="text/javascript" src="bower_components/requirejs/require.js"></script>
    <script>
      require.config({ paths: { 'echo-3.0.0': 'http://static.int.bbci.co.uk/echoclient/modules/echo-3.0.0'} });
      require(['echo-3.0.0'],function(Echo){
 
          var Media = Echo.Media,             // Media class
              EchoClient = Echo.EchoClient,   // Echo Client class
              Enums = Echo.Enums,             // Enums
              ConfigKeys = Echo.ConfigKeys,   // Key names to use in config
              Environment = Echo.Environment; // Class to allow overriding default behaviour

          var conf = {};
          conf[ConfigKeys.RUM.ENABLED] = false;
          
          var echo = new EchoClient('newsLabsWat', // App Name
                                    Enums.ApplicationType.WEB,  // App type
                                    conf
                                   );
          window.echo = echo;
      });
      
      $(window).load(function() {
        window.echo.viewEvent("Corporate.connectedstudio.newslabs.wat.page", { labsBlog_label:"counter" });
      });
    </script>
  </body>
</html>